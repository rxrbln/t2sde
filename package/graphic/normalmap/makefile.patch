# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: package/.../normalmap/makefile.patch
# Copyright (C) 2006 The T2 SDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- T2-COPYRIGHT-NOTE-END ---

--- gimp-normalmap-1.2.1/Makefile_orig	2006-10-24 19:12:45.000000000 +0100
+++ gimp-normalmap-1.2.1/Makefile	2006-10-24 19:16:57.000000000 +0100
@@ -1,7 +1,34 @@
-
-OS=$(shell uname -s)
-ifeq ($(OS), Linux)
-include Makefile.linux
-else
-include Makefile.win32
-endif
+GIMPTOOL=gimptool-2.0
+
+CC=gcc
+CFLAGS=-O3 -Wall `pkg-config --cflags gtk+-2.0 gtkglext-1.0 gimp-2.0`
+LD=gcc
+LDFLAGS=
+
+TARGET=normalmap
+
+OBJS=normalmap.o preview3d.o scale.o
+
+LIBS=`pkg-config --libs gtk+-2.0 gtkglext-1.0 gimp-2.0 gimpui-2.0 pangox` \
+`pkg-config x11 --libs-only-L` -lGLEW
+
+all: $(TARGET)
+
+$(TARGET): $(OBJS)
+	$(LD) $(LDFLAGS) $(OBJS) $(LIBS) -o $(TARGET)
+		 
+clean:
+	rm -f *.o $(TARGET)
+	
+install: all
+	$(GIMPTOOL) --install-bin $(TARGET)
+		
+.c.o:
+	$(CC) -c $(CFLAGS) $<
+	  
+normalmap.o: normalmap.c scale.h preview3d.h Makefile
+preview3d.o: preview3d.c scale.h  objects/cube.h objects/quad.h \
+objects/sphere.h objects/torus.h objects/teapot.h pixmaps/object.xpm \
+pixmaps/light.xpm pixmaps/scene.xpm pixmaps/full.xpm Makefile
+scale.o: scale.c Makefile
+
