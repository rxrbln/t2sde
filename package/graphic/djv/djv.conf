# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by scripts/Create-CopyPatch.
# 
# T2 SDE: package/*/djv/djv.conf
# Copyright (C) 2007 - 2021 The T2 SDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- T2-COPYRIGHT-NOTE-END ---

djv_prepare () {
    export BUILD_DIR=/usr
    sed -i -e s',$ENV{HOME}/tmp,,' \
	-i -e s',/usr/bin,/opt/djv/bin,' CMakeLists.txt
    [[ $libdir = *lib64 ]] && sed -i -e s',/djv/lib,/djv/lib64,' CMakeLists.txt
 
    sed -i -e s',int(this),long(this),' bin/djv_view/window_image.cxx \
	bin/djv_view/window_file.cxx
    cmake $cmakeopt . # TODO: use generic build infrastructure
}
hook_add preconf 5 djv_prepare
