# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by scripts/Create-CopyPatch.
# 
# T2 SDE: package/.../libmpeg2/altivec.patch
# Copyright (C) 2020 The T2 SDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- T2-COPYRIGHT-NOTE-END ---

--- a/configure.ac.bak	2010-05-25 17:12:14.756245990 +0000
+++ b/configure.ac	2010-05-25 17:11:51.629581723 +0000
@@ -79,11 +79,10 @@
 		 CFLAGS="$OPT_CFLAGS $TRY_CFLAGS $CFLAGS"
 		 AC_MSG_CHECKING([if <altivec.h> is needed])
 		 AC_TRY_COMPILE([],
-		    [typedef vector int t;
-		     vec_ld(0, (unsigned char *)0);],
+		    [vector int t; t = vec_add(t,t);],
 		    [have_altivec=yes; AC_MSG_RESULT(no)],
 		    [AC_TRY_COMPILE([#include <altivec.h>],
-			[typedef vector int t; vec_ld(0, (unsigned char *)0);],
+			[vector int t; t = vec_add(t,t);],
 			[AC_DEFINE([HAVE_ALTIVEC_H],,
 			    [Define to 1 if you have the <altivec.h> header.])
 			 have_altivec=yes; AC_MSG_RESULT(yes)],
--- a/configure.vanilla	2020-03-18 22:39:38.000000000 +0100
+++ b/configure	2020-03-18 22:41:50.000000000 +0100
@@ -4984,8 +4984,7 @@
 int
 main ()
 {
-typedef vector int t;
-		     vec_ld(0, (unsigned char *)0);
+		     vector int t; t = vec_add(t,t);
   ;
   return 0;
 }
@@ -5023,7 +5022,7 @@
 int
 main ()
 {
-typedef vector int t; vec_ld(0, (unsigned char *)0);
+vector t; t = vec_add(t,t);
   ;
   return 0;
 }
