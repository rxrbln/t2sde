#!/bin/sh

menu_begin MENU_LIBC 'Selecting C Library'
	CFGTEMP_LIBC_LIST=

	for x in `grep -e ' LIBC ' config/$config/packages | cut -d' ' -f5`; do
		var_append CFGTEMP_LIBC_LIST ' ' \
		"$x $x,_$( grep -e '^\[I\]' package/*/$x/$x.desc \
			| cut -d' ' -f2- | tr ' ' '_' )"
	done

	if [ -z "$CFGTEMP_LIBC_LIST" ]; then
		CFGTEMP_LIBC_LIST="none WARNING:_No_libc_was_selected!"
	fi

	choice ROCKCFG_LIBC glibc $CFGTEMP_LIBC_LIST
	
	# default libc must get enabled
	[ "$ROCKCFG_LIBC" != "none" ] && pkgenable $ROCKCFG_LIBC

	comment ' '

	# do package specific config
	[ -s $cfgtmpdir/subconfig-libc.in ] && . $cfgtmpdir/subconfig-libc.in

menu_end
