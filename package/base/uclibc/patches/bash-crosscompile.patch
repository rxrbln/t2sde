# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: package/.../uclibc/patches/bash-crosscompile.patch
# Copyright (C) 2006 The T2 SDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- T2-COPYRIGHT-NOTE-END ---

bash's configure assumes getcwd is broken if cross compiling for an
unsupported architecture, then includes its own getcwd implementation
which conflicts with the SDE fl_wrapper library.
--  Michael Tross

diff -urN bash-3.1/configure bash-3.1.work/configure
--- bash-3.1/configure	2005-12-01 15:44:38.000000000 +0100
+++ bash-3.1.work/configure	2006-01-23 08:45:44.000000000 +0100
@@ -3664,6 +3664,9 @@
 	cross_cache=${srcdir}/cross-build/x86-beos.cache
 	SIGNAMES_H='${srcdir}/cross-build/beos-sig.h'
 	;;
+    i[456]86-t2-linux-uclibc)
+	cross_cache=${srcdir}/cross-build/x86-uclibc.cache
+	;;
     *)	echo "configure: cross-compiling for $host is not supported" >&2
 	;;
     esac
diff -urN bash-3.1/cross-build/x86-uclibc.cache bash-3.1.work/cross-build/x86-uclibc.cache
--- bash-3.1/cross-build/x86-uclibc.cache	1970-01-01 01:00:00.000000000 +0100
+++ bash-3.1.work/cross-build/x86-uclibc.cache	2006-01-23 08:57:59.000000000 +0100
@@ -0,0 +1,17 @@
+# This file is a shell script that caches the results of configure
+# tests for x86 uClibc so they don't need to be done when cross-compiling.
+
+# x86 uClibc is little endian
+ac_cv_c_bigendian=${ac_cv_c_bigendian='no'}
+ac_cv_sizeof_char_p=${ac_cv_sizeof_char_p='4'}
+ac_cv_sizeof_int=${ac_cv_sizeof_int='4'}
+ac_cv_sizeof_long=${ac_cv_sizeof_long='4'}
+ac_cv_sizeof_double=${ac_cv_sizeof_double='8'}
+
+# uClibc getcwd allocates memory if necessary
+bash_cv_getcwd='yes'
+bash_cv_getcwd_malloc='yes'
+bash_cv_getcwd_calls_popen='no'
+bash_cv_func_strcoll_broken='no'
+
+# end of cross-build/x86-uClibc.cache
