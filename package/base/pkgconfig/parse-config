# --- T2-COPYRIGHT-NOTE-BEGIN ---
# T2 SDE: package/*/pkgconfig/parse-config
# Copyright (C) 2006 - 2024 The T2 SDE Project
# 
# This Copyright note is generated by scripts/Create-CopyPatch,
# more information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 2.
# --- T2-COPYRIGHT-NOTE-END ---

if ! atstage native; then
	#export PKG_CONFIG_DEBUG_SPEW=yes
	export SYSPKG_CONFIG_PATH="$PKG_CONFIG_PATH"
	export SYSPKG_CONFIG_LIBDIR="$PKG_CONFIG_LIBDIR"

	export PKG_CONFIG_PATH= # clear to not leak host files
	for x in $sysroot/TOOLCHAIN/cross/{share,lib?*,lib}/pkgconfig; do
		if [ -d $x ]; then
			var_append SYSPKG_CONFIG_PATH ':' "$x"
			var_append SYSPKG_CONFIG_LIBDIR ':' "$x"
		fi
	done

	# yes, always adding for toolchain, too
	for x in $root{,/usr,/opt}{,/*}/{share,lib?*,lib}/pkgconfig; do
		[ -d $x ] && var_append PKG_CONFIG_PATH ':' "$x"
	done

	export PKG_CONFIG_LIBDIR=$PKG_CONFIG_PATH # needed, otherwse system is used
fi
