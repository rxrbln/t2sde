# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: package/.../dietlibc/patches/pkg_udev.patch
# Copyright (C) 2008 The T2 SDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- T2-COPYRIGHT-NOTE-END ---

--- udev-128/extras/scsi_id/scsi.h.orig	2008-08-26 09:21:40.000000000 +0200
+++ udev-128/extras/scsi_id/scsi.h	2008-09-17 16:22:22.000000000 +0200
@@ -70,9 +70,9 @@
 #define	SCSI_ID_ASCII	2
 
 struct scsi_id_search_values {
-	u_char	id_type;
-	u_char	naa_type;
-	u_char	code_set;
+	unsigned char	id_type;
+	unsigned char	naa_type;
+	unsigned char	code_set;
 };
 
 /*
--- udev-128/udev/udevd.c.orig	2008-09-10 21:37:29.000000000 +0200
+++ udev-128/udev/udevd.c	2008-09-17 16:04:48.000000000 +0200
@@ -47,6 +47,10 @@
 #include "udev.h"
 #include "udev_rules.h"
 
+#ifndef SO_RCVBUFFORCE
+#define SO_RCVBUFFORCE	(33)
+#endif
+
 #define UDEVD_PRIORITY			-4
 #define UDEV_PRIORITY			-2
 
--- ./udev/lib/libudev-monitor.c.orig	2008-11-01 20:09:10.000000000 +0100
+++ ./udev/lib/libudev-monitor.c	2008-12-06 14:17:16.000000000 +0100
@@ -32,6 +32,10 @@
 #include "libudev.h"
 #include "libudev-private.h"
 
+#ifndef SO_RCVBUFFORCE
+#define SO_RCVBUFFORCE (33)
+#endif
+
 struct udev_monitor {
 	struct udev *udev;
 	int refcount;
--- ./udev/udev-util.c.orig	2008-11-06 02:56:15.000000000 +0100
+++ ./udev/udev-util.c	2008-12-06 20:28:36.000000000 +0100
@@ -127,7 +127,7 @@
 uid_t util_lookup_user(struct udev *udev, const char *user)
 {
 	char *endptr;
-	int buflen = sysconf(_SC_GETPW_R_SIZE_MAX);
+	int buflen = 2048; //sysconf(_SC_GETPW_R_SIZE_MAX);
 	char buf[buflen];
 	struct passwd pwbuf;
 	struct passwd *pw;
@@ -153,7 +153,7 @@
 extern gid_t util_lookup_group(struct udev *udev, const char *group)
 {
 	char *endptr;
-	int buflen = sysconf(_SC_GETGR_R_SIZE_MAX);
+	int buflen = 2048; //sysconf(_SC_GETGR_R_SIZE_MAX);
 	char buf[buflen];
 	struct group grbuf;
 	struct group *gr;
