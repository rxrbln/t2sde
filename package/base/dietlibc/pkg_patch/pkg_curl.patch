# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: package/.../dietlibc/pkg_patch/pkg_curl.patch
# Copyright (C) 2004 - 2005 The T2 SDE Project
# Copyright (C) 1998 - 2004 ROCK Linux Project
# 
# More information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- T2-COPYRIGHT-NOTE-END ---

--- ./lib/hostip.c.orig	Wed May  1 14:11:50 2002
+++ ./lib/hostip.c	Wed May  1 14:12:26 2002
@@ -405,7 +405,7 @@
   in.s_addr = htonl(num);
 
 #if defined(HAVE_INET_NTOA_R)
-  inet_ntoa_r(in,addr,addr_len);
+  inet_ntoa_r(in,addr);
 #else
   strncpy(addr,inet_ntoa(in),addr_len);
 #endif
--- ./lib/ftp.c.orig	Wed May  1 14:12:49 2002
+++ ./lib/ftp.c	Wed May  1 14:13:06 2002
@@ -939,7 +939,7 @@
   infof(conn->data, "Connecting to %s (%s) port %u\n",
         answer?answer->h_name:newhost,
 #if defined(HAVE_INET_NTOA_R)
-        inet_ntoa_r(in, ntoa_buf, sizeof(ntoa_buf)),
+        inet_ntoa_r(in, ntoa_buf),
 #else
         inet_ntoa(in),
 #endif
@@ -1283,7 +1283,7 @@
 #ifdef HAVE_INET_NTOA_R
     /* ignore the return code from inet_ntoa_r() as it is int or
        char * depending on system */
-    inet_ntoa_r(in, ntoa_buf, sizeof(ntoa_buf));
+    inet_ntoa_r(in, ntoa_buf);
     sscanf( ntoa_buf, "%hu.%hu.%hu.%hu",
             &ip[0], &ip[1], &ip[2], &ip[3]);
 #else
--- ./lib/url.c.orig	Wed May  1 14:13:24 2002
+++ ./lib/url.c	Wed May  1 14:13:33 2002
@@ -1307,7 +1307,7 @@
     (void) memcpy(&in.s_addr, &conn->serv_addr.sin_addr, sizeof (in.s_addr));
     infof(data, "Connected to %s (%s) port %d\n", conn->hostaddr->h_name,
 #if defined(HAVE_INET_NTOA_R)
-          inet_ntoa_r(in, ntoa_buf, sizeof(ntoa_buf)),
+          inet_ntoa_r(in, ntoa_buf),
 #else
           inet_ntoa(in),
 #endif
--- ./lib/if2ip.c.orig	Wed May  1 14:13:47 2002
+++ ./lib/if2ip.c	Wed May  1 14:13:54 2002
@@ -109,7 +109,7 @@
       struct sockaddr_in *s = (struct sockaddr_in *)&req.ifr_dstaddr;
       memcpy(&in, &(s->sin_addr.s_addr), sizeof(in));
 #if defined(HAVE_INET_NTOA_R)
-      ip = inet_ntoa_r(in,buf,buf_size);
+      ip = inet_ntoa_r(in,buf);
 #else
       ip = strncpy(buf,inet_ntoa(in),buf_size);
       ip[buf_size - 1] = 0;
diff -Nur curl-7.10.7.orig/configure curl-7.10.7/configure
--- curl-7.10.7.orig/configure	Thu Aug 14 22:44:54 2003
+++ curl-7.10.7/configure	Fri Sep  5 10:56:52 2003
@@ -6404,7 +6404,7 @@
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
 rm -f conftest.err conftest.$ac_ext
-if $ac_preproc_ok; then
+if true; then
   :
 else
   { { echo "$as_me:$LINENO: error: C++ preprocessor \"$CXXCPP\" fails sanity check
