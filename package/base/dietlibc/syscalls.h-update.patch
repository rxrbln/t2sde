# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: package/.../dietlibc/syscalls.h-update.patch
# Copyright (C) 2011 The T2 SDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- T2-COPYRIGHT-NOTE-END ---

--- dietlibc-0.32/i386/syscalls.h	2008-09-30 23:02:35.000000000 +0200
+++ dietlibc/i386/syscalls.h	2009-12-02 03:22:03.000000000 +0100
@@ -325,6 +325,16 @@
 #define __NR_fallocate		324
 #define __NR_timerfd_settime	325
 #define __NR_timerfd_gettime	326
+#define __NR_signalfd4		327
+#define __NR_eventfd2		328
+#define __NR_epoll_create1	329
+#define __NR_dup3		330
+#define __NR_pipe2		331
+#define __NR_inotify_init1	332
+#define __NR_preadv		333
+#define __NR_pwritev		334
+#define __NR_rt_tgsigqueueinfo	335
+#define __NR_perf_event_open	336
 
 
 #define syscall_weak(name,wsym,sym) \
--- dietlibc-0.32/x86_64/syscalls.h	2008-09-30 23:02:35.000000000 +0200
+++ dietlibc/x86_64/syscalls.h	2009-12-02 03:22:03.000000000 +0100
@@ -334,6 +334,17 @@
 #define __NR_fallocate		285
 #define __NR_timerfd_settime	286
 #define __NR_timerfd_gettime	287
+#define __NR_accept4		288
+#define __NR_signalfd4		289
+#define __NR_eventfd2		290
+#define __NR_epoll_create1	291
+#define __NR_dup3		292
+#define __NR_pipe2		293
+#define __NR_inotify_init1	294
+#define __NR_preadv		295
+#define __NR_pwritev		296
+#define __NR_rt_tgsigqueueinfo	297
+#define __NR_perf_event_open	298

 
 #ifdef __PIC__
--- dietlibc-0.32/arm/syscalls.h.vanilla	2011-01-08 16:25:50.000000000 +0000
+++ dietlibc-0.32/arm/syscalls.h	2011-01-08 16:28:00.000000000 +0000
@@ -345,8 +345,8 @@
 #define __NR_readlinkat			(__NR_SYSCALL_BASE+332)
 #define __NR_fchmodat			(__NR_SYSCALL_BASE+333)
 #define __NR_faccessat			(__NR_SYSCALL_BASE+334)
-					/* 335 for pselect6 */
-					/* 336 for ppoll */
+#define __NR_pselect6			(__NR_SYSCALL_BASE+335)
+#define __NR_ppoll			(__NR_SYSCALL_BASE+336)
 #define __NR_unshare			(__NR_SYSCALL_BASE+337)
 #define __NR_set_robust_list		(__NR_SYSCALL_BASE+338)
 #define __NR_get_robust_list		(__NR_SYSCALL_BASE+339)
@@ -366,5 +366,15 @@
 #define __NR_timerfd_settime		(__NR_SYSCALL_BASE+353)
 #define __NR_timerfd_gettime		(__NR_SYSCALL_BASE+354)
+#define __NR_signalfd4   	        (__NR_SYSCALL_BASE+355)
+#define __NR_eventfd2                  	(__NR_SYSCALL_BASE+356)
+#define __NR_epoll_create1              (__NR_SYSCALL_BASE+357)
+#define __NR_dup3                       (__NR_SYSCALL_BASE+358)
+#define __NR_pipe2                      (__NR_SYSCALL_BASE+359)
+#define __NR_inotify_init1              (__NR_SYSCALL_BASE+360)
+#define __NR_preadv                     (__NR_SYSCALL_BASE+361)
+#define __NR_pwritev                    (__NR_SYSCALL_BASE+362)
+#define __NR_rt_tgsigqueueinfo          (__NR_SYSCALL_BASE+363)
+#define __NR_perf_event_open            (__NR_SYSCALL_BASE+364)
 
 /*
  * The following SWIs are ARM private.
--- dietlibc-0.32/mips/syscalls.h.vanilla	2011-01-08 16:25:50.000000000 +0000
+++ dietlibc-0.32/mips/syscalls.h	2011-01-08 16:34:39.000000000 +0000
@@ -327,6 +327,22 @@
 #define __NR_timerfd_create		(__NR_Linux + 284)
 #define __NR_timerfd_gettime		(__NR_Linux + 285)
 #define __NR_timerfd_settime		(__NR_Linux + 286)
+/* are the last ones atop wrong? */
+#define __NR_signalfd4                  (__NR_Linux + 324)
+#define __NR_eventfd2                   (__NR_Linux + 325)
+#define __NR_epoll_create1              (__NR_Linux + 326)
+#define __NR_dup3                       (__NR_Linux + 327)
+#define __NR_pipe2                      (__NR_Linux + 328)
+#define __NR_inotify_init1              (__NR_Linux + 329)
+#define __NR_preadv                     (__NR_Linux + 330)
+#define __NR_pwritev                    (__NR_Linux + 331)
+#define __NR_rt_tgsigqueueinfo          (__NR_Linux + 332)
+#define __NR_perf_event_open            (__NR_Linux + 333)
+#define __NR_accept4                    (__NR_Linux + 334)
+#define __NR_recvmmsg                   (__NR_Linux + 335)
+#define __NR_fanotify_init              (__NR_Linux + 336)
+#define __NR_fanotify_mark              (__NR_Linux + 337)
+#define __NR_prlimit64                  (__NR_Linux + 338)
 
 #define syscall_weak(name,wsym,sym) \
 .text; \
--- dietlibc-0.32/ppc/syscalls.h.vanilla	2011-01-08 16:25:50.000000000 +0000
+++ dietlibc-0.32/ppc/syscalls.h	2011-01-08 16:36:18.000000000 +0000
@@ -311,6 +311,38 @@
 #define __NR_subpage_prot	310
 #define __NR_timerfd_settime	311
 #define __NR_timerfd_gettime	312
+#define __NR_signalfd4          313
+#define __NR_eventfd2           314
+#define __NR_epoll_create1	315
+#define __NR_dup3               316
+#define __NR_pipe2              317
+#define __NR_inotify_init1	318
+#define __NR_perf_event_open    319
+#define __NR_preadv             320
+#define __NR_pwritev            321
+#define __NR_rt_tgsigqueueinfo  322
+#define __NR_fanotify_init	323
+#define __NR_fanotify_mark	324
+#define __NR_prlimit64          325
+#define __NR_socket             326
+#define __NR_bind               327
+#define __NR_connect            328
+#define __NR_listen             329
+#define __NR_accept             330
+#define __NR_getsockname        331
+#define __NR_getpeername        332
+#define __NR_socketpair         333
+#define __NR_send               334
+#define __NR_sendto             335
+#define __NR_recv               336
+#define __NR_recvfrom           337
+#define __NR_shutdown           338
+#define __NR_setsockopt         339
+#define __NR_getsockopt         340
+#define __NR_sendmsg            341
+#define __NR_recvmsg            342
+#define __NR_recvmmsg           343
+#define __NR_accept4            344

 
 #define syscall_weak(name,wsym,sym) \
--- dietlibc-0.32/ppc64/syscalls.h.vanilla	2011-01-08 16:25:50.000000000 +0000
+++ dietlibc-0.32/ppc64/syscalls.h	2011-01-08 16:36:34.000000000 +0000
@@ -311,6 +311,38 @@
 #define __NR_subpage_prot	310
 #define __NR_timerfd_settime	311
 #define __NR_timerfd_gettime	312
+#define __NR_signalfd4          313
+#define __NR_eventfd2           314
+#define __NR_epoll_create1	315
+#define __NR_dup3               316
+#define __NR_pipe2              317
+#define __NR_inotify_init1	318
+#define __NR_perf_event_open    319
+#define __NR_preadv             320
+#define __NR_pwritev            321
+#define __NR_rt_tgsigqueueinfo  322
+#define __NR_fanotify_init	323
+#define __NR_fanotify_mark	324
+#define __NR_prlimit64          325
+#define __NR_socket             326
+#define __NR_bind               327
+#define __NR_connect            328
+#define __NR_listen             329
+#define __NR_accept             330
+#define __NR_getsockname        331
+#define __NR_getpeername        332
+#define __NR_socketpair         333
+#define __NR_send               334
+#define __NR_sendto             335
+#define __NR_recv               336
+#define __NR_recvfrom           337
+#define __NR_shutdown           338
+#define __NR_setsockopt         339
+#define __NR_getsockopt         340
+#define __NR_sendmsg            341
+#define __NR_recvmsg            342
+#define __NR_recvmmsg           343
+#define __NR_accept4            344

 
 #define __diet_proto_common(sym) \
