--- ./include/asm-i386/atomic.h.orig	2005-03-10 22:12:23.104674184 -0300
+++ ./include/asm-i386/atomic.h	2005-03-10 22:14:38.358112536 -0300
@@ -3,7 +3,9 @@
 
 #include <linux/config.h>
 #include <linux/compiler.h>
-#include <asm/processor.h>
+#ifdef __KERNEL__
+# include <asm/processor.h>
+#endif
 
 /*
  * Atomic operations that C can't guarantee us.  Useful for
