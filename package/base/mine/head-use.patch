
The usual head fixes.

  - Rene Rebe <rene@rocklinux.org>

--- mine-0.15-orig/cdb-0.75.patch	2003-09-27 15:20:58.000000000 +0200
+++ mine-0.15/cdb-0.75.patch	2004-05-03 21:11:26.000000000 +0200
@@ -1,6 +1,6 @@
---- cdb-0.75/Makefile.orig	2002-10-16 13:17:55.000000000 +0200
-+++ cdb-0.75/Makefile	2002-10-16 13:24:44.000000000 +0200
-@@ -12,16 +12,8 @@
+--- cdb-0.75/Makefile.orig	2003-09-27 15:20:58.000000000 +0200
++++ cdb-0.75/Makefile	2004-05-03 21:05:42.000000000 +0200
+@@ -12,17 +12,9 @@
  compile alloc.c alloc.h error.h
  	./compile alloc.c
  
@@ -14,10 +14,67 @@
 -
  auto_home.c: \
 -auto-str conf-home
+-	./auto-str auto_home `head -1 conf-home` > auto_home.c
 +conf-home
- 	./auto-str auto_home `head -1 conf-home` > auto_home.c
++	./auto-str auto_home `head -n 1 conf-home` > auto_home.c
  
  auto_home.o: \
+ compile auto_home.c
+@@ -126,14 +118,14 @@
+ cdbmake-12: \
+ warn-auto.sh cdbmake-12.sh conf-home
+ 	cat warn-auto.sh cdbmake-12.sh \
+-	| sed s}HOME}"`head -1 conf-home`"}g \
++	| sed s}HOME}"`head -n 1 conf-home`"}g \
+ 	> cdbmake-12
+ 	chmod 755 cdbmake-12
+ 
+ cdbmake-sv: \
+ warn-auto.sh cdbmake-sv.sh conf-home
+ 	cat warn-auto.sh cdbmake-sv.sh \
+-	| sed s}HOME}"`head -1 conf-home`"}g \
++	| sed s}HOME}"`head -n 1 conf-home`"}g \
+ 	> cdbmake-sv
+ 	chmod 755 cdbmake-sv
+ 
+@@ -167,7 +159,7 @@
+ compile: \
+ warn-auto.sh conf-cc
+ 	( cat warn-auto.sh; \
+-	echo exec "`head -1 conf-cc`" '-c $${1+"$$@"}' \
++	echo exec "`head -n 1 conf-cc`" '-c $${1+"$$@"}' \
+ 	) > compile
+ 	chmod 755 compile
+ 
+@@ -210,7 +202,7 @@
+ warn-auto.sh conf-ld
+ 	( cat warn-auto.sh; \
+ 	echo 'main="$$1"; shift'; \
+-	echo exec "`head -1 conf-ld`" \
++	echo exec "`head -n 1 conf-ld`" \
+ 	'-o "$$main" "$$main".o $${1+"$$@"}' \
+ 	) > load
+ 	chmod 755 load
+@@ -249,7 +241,7 @@
+ rts: \
+ warn-auto.sh rts.sh conf-home
+ 	cat warn-auto.sh rts.sh \
+-	| sed s}HOME}"`head -1 conf-home`"}g \
++	| sed s}HOME}"`head -n 1 conf-home`"}g \
+ 	> rts
+ 	chmod 755 rts
+ 
+@@ -284,8 +276,8 @@
+ systype: \
+ find-systype.sh conf-cc conf-ld trycpp.c x86cpuid.c
+ 	( cat warn-auto.sh; \
+-	echo CC=\'`head -1 conf-cc`\'; \
+-	echo LD=\'`head -1 conf-ld`\'; \
++	echo CC=\'`head -n 1 conf-cc`\'; \
++	echo LD=\'`head -n 1 conf-ld`\'; \
+ 	cat find-systype.sh; \
+ 	) | sh > systype
+ 
 --- cdb-0.75/auto-str.c.orig	2002-10-16 13:13:48.000000000 +0200
 +++ cdb-0.75/auto-str.c	2002-10-16 13:24:44.000000000 +0200
 @@ -1,15 +1,6 @@
@@ -71,3 +128,4 @@
  
  extern int error_intr;
  extern int error_nomem;
+ 
--- mine-0.15-orig/cdb-0.75/Makefile	2003-09-27 15:20:58.000000000 +0200
+++ mine-0.15/cdb-0.75/Makefile	2004-05-03 21:05:42.000000000 +0200
@@ -14,7 +14,7 @@
 
 auto_home.c: \
 conf-home
-	./auto-str auto_home `head -1 conf-home` > auto_home.c
+	./auto-str auto_home `head -n 1 conf-home` > auto_home.c
 
 auto_home.o: \
 compile auto_home.c
@@ -118,14 +118,14 @@
 cdbmake-12: \
 warn-auto.sh cdbmake-12.sh conf-home
 	cat warn-auto.sh cdbmake-12.sh \
-	| sed s}HOME}"`head -1 conf-home`"}g \
+	| sed s}HOME}"`head -n 1 conf-home`"}g \
 	> cdbmake-12
 	chmod 755 cdbmake-12
 
 cdbmake-sv: \
 warn-auto.sh cdbmake-sv.sh conf-home
 	cat warn-auto.sh cdbmake-sv.sh \
-	| sed s}HOME}"`head -1 conf-home`"}g \
+	| sed s}HOME}"`head -n 1 conf-home`"}g \
 	> cdbmake-sv
 	chmod 755 cdbmake-sv
 
@@ -159,7 +159,7 @@
 compile: \
 warn-auto.sh conf-cc
 	( cat warn-auto.sh; \
-	echo exec "`head -1 conf-cc`" '-c $${1+"$$@"}' \
+	echo exec "`head -n 1 conf-cc`" '-c $${1+"$$@"}' \
 	) > compile
 	chmod 755 compile
 
@@ -202,7 +202,7 @@
 warn-auto.sh conf-ld
 	( cat warn-auto.sh; \
 	echo 'main="$$1"; shift'; \
-	echo exec "`head -1 conf-ld`" \
+	echo exec "`head -n 1 conf-ld`" \
 	'-o "$$main" "$$main".o $${1+"$$@"}' \
 	) > load
 	chmod 755 load
@@ -241,7 +241,7 @@
 rts: \
 warn-auto.sh rts.sh conf-home
 	cat warn-auto.sh rts.sh \
-	| sed s}HOME}"`head -1 conf-home`"}g \
+	| sed s}HOME}"`head -n 1 conf-home`"}g \
 	> rts
 	chmod 755 rts
 
@@ -276,8 +276,8 @@
 systype: \
 find-systype.sh conf-cc conf-ld trycpp.c x86cpuid.c
 	( cat warn-auto.sh; \
-	echo CC=\'`head -1 conf-cc`\'; \
-	echo LD=\'`head -1 conf-ld`\'; \
+	echo CC=\'`head -n 1 conf-cc`\'; \
+	echo LD=\'`head -n 1 conf-ld`\'; \
 	cat find-systype.sh; \
 	) | sh > systype
 
