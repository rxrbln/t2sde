# --- ROCK-COPYRIGHT-NOTE-BEGIN ---
# 
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# Please add additional copyright information _after_ the line containing
# the ROCK-COPYRIGHT-NOTE-END tag. Otherwise it might get removed by
# the ./scripts/Create-CopyPatch script. Do not edit this copyright text!
# 
# ROCK Linux: rock-src/package/base/rock-debug/rock-debug.conf
# ROCK Linux is Copyright (C) 1998 - 2003 Clifford Wolf
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version. A copy of the GNU General Public
# License can be found at Documentation/COPYING.
# 
# Many people helped and are helping developing ROCK Linux. Please
# have a look at http://www.rocklinux.org/ and the Documentation/TEAM
# file for details.
# 
# --- ROCK-COPYRIGHT-NOTE-END ---


main_rd() {
    if [ -z "$root" ] ; then
	rm -f /var/adm/*/rock-debug
	mkdir -p /var/adm/rock-debug
	cd $xroot/

	cat << 'EOT' |
shares.txt	shares.sh	'shared' files
bindups.txt	bindups.sh	duplicated binary names
rootfsbin.txt	rootfsbin.sh	binaries in /bin and /sbin
unarchived.txt	unarchived.sh	files 'liggering' arround
baduidgid.txt	baduidgid.sh	files with unknown UID/GID
usrlocal.txt	usrlocal.sh	files in /usr/local tree
empty.txt	empty.sh	empty files or packages
badfiles.txt	badfiles.sh	known bad files in packages
EOT
	while read file script desc ; do
		echo -n "Checking for $desc ..." ; lang=bash
		$lang $confdir/test_$script > /var/adm/rock-debug/$file 2>&1
		if [ -s /var/adm/rock-debug/$file ] ; then
			echo " found errors!"
		else
			echo " ok." ; rm -f /var/adm/rock-debug/$file
		fi
	done

	dump_env > /var/adm/rock-debug/buildenv.txt
	cp -a $base/config/$config/config /var/adm/rock-debug/config.txt
	touch /var/adm/rock-debug/*
    fi
}

custmain="main_rd"
autoextract=0
srctar=none

