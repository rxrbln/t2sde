# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: package/.../t2-debug/t2-debug.conf
# Copyright (C) 2004 - 2005 The T2 SDE Project
# Copyright (C) 1998 - 2003 ROCK Linux Project
# 
# More information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- T2-COPYRIGHT-NOTE-END ---

main_rd() {
    if [ -z "$root" ] ; then
	rm -f /var/adm/*/rock-debug
	mkdir -p /var/adm/rock-debug
	cd $root/

	cat << 'EOT' |
shares.txt	shares.sh	'shared' files
bindups.txt	bindups.sh	duplicated binary names
rootfsbin.txt	rootfsbin.sh	binaries in /bin and /sbin
unarchived.txt	unarchived.sh	files 'liggering' arround
baduidgid.txt	baduidgid.sh	files with unknown UID/GID
usrlocal.txt	usrlocal.sh	files in /usr/local tree
empty.txt	empty.sh	empty files or packages
badfiles.txt	badfiles.sh	known bad files in packages
EOT
	while read file script desc ; do
		echo -n "Checking for $desc ..." ; lang=bash
		$lang $confdir/test_$script > /var/adm/rock-debug/$file 2>&1
		if [ -s /var/adm/rock-debug/$file ] ; then
			echo " found errors!"
		else
			echo " ok." ; rm -f /var/adm/rock-debug/$file
		fi
	done

	dump_env > /var/adm/rock-debug/buildenv.txt
	cp -a $base/config/$config/config /var/adm/rock-debug/config.txt
	touch /var/adm/rock-debug/*
    fi
}

custmain="main_rd"
srctar=none

