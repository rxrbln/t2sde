# --- T2-COPYRIGHT-BEGIN ---
# t2/package/*/xf86-video-mach64/z-hotfix-mmio-move32.patch
# Copyright (C) 2026 The T2 SDE Project
# SPDX-License-Identifier: GPL-2.0 or patched project license
# --- T2-COPYRIGHT-END ---

--- xf86-video-mach64-6.10.0/src/atimach64accel.c.vanilla	2026-02-14 17:37:48.330868333 +0100
+++ xf86-video-mach64-6.10.0/src/atimach64accel.c	2026-02-14 17:46:28.519132923 +0100
@@ -930,6 +930,13 @@
             pDst = (volatile CARD32 *)pATI->pHOST_DATA - iDWord;
             pSrc = pBitmapData - iDWord;
 
+#if X_BYTE_ORDER == X_BIG_ENDIAN
+ #  define MMIO_MOVE32(base, offset, val) \
+        xf86WriteMmio32Be(base, offset, (CARD32)(val))
+#else
+ #  define MMIO_MOVE32(base, offset, val) \
+        MMIO_OUT32(base, offset, (CARD32)(val))
+#endif
             switch (iDWord)
             {
                 case  0:  MMIO_MOVE32(pDst +  0, 0, *(pSrc +  0));
