
MTRR support was not enabled (for x86, x86-64) because no HAVE_MTTR_SUPPORT
was defined for the Linux case in the configure script.

  - Rene Rebe <rene@exactcode.de>

--- xorg-server-1.0.1/configure.ac	2005-12-21 03:30:08.000000000 +0100
+++ xorg-server-1.0.1-fixed/configure.ac	2006-02-03 00:15:30.266980500 +0100
@@ -111,7 +111,11 @@
 AM_CONDITIONAL(FBDEVHW, [test "x$FBDEV" = xyes])
 
 dnl MTRR header
-AC_CHECK_HEADERS([asm/mtrr.h])
+AC_CHECK_HEADERS([asm/mtrr.h], ac_cv_mtrr_h=yes)
+if test "x$ac_cv_mtrr_h" = xyes; then
+	AC_DEFINE(HAS_MTRR_SUPPORT, 1, [Define to 1 if LINUX MTRR support is
+		available])
+fi
 
 dnl BSD MTRR header
 AC_CHECK_HEADERS([sys/memrange.h], ac_cv_memrange_h=yes)
--- xorg-server-1.0.1/configure	2005-12-21 08:34:51.000000000 +0100
+++ xorg-server-1.0.1-fixed/configure	2006-02-03 00:15:39.003526500 +0100
@@ -23849,11 +23849,18 @@
   cat >>confdefs.h <<_ACEOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
-
+ ac_cv_mtrr_h=yes
 fi
 
 done
 
+if test "x$ac_cv_mtrr_h" = xyes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAS_MTRR_SUPPORT 1
+_ACEOF
+
+fi
 
 
 for ac_header in sys/memrange.h
