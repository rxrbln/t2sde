# --- T2-COPYRIGHT-NOTE-BEGIN ---
# T2 SDE: package/*/tcl/tcl.conf
# Copyright (C) 2004 - 2021 The T2 SDE Project
# Copyright (C) 1998 - 2003 ROCK Linux Project
# 
# This Copyright note is generated by scripts/Create-CopyPatch,
# more information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 2.
# --- T2-COPYRIGHT-NOTE-END ---

atstage cross &&
	hook_add preconf 5 "echo 'ac_cv_func_strtod=yes
	                    tcl_cv_strtod_buggy=1' >> config.cache"

ptcl () {
    mm=`echo $ver | cut -d . -f 1-2`
    ln -vsf tclsh$mm $root$bindir/tclsh
    ln -vsf libtcl$mm.so $root$libdir/libtcl.so
    install -m 644 ../generic/tcl{Int,IntDecls,Port,IntPlatDecls}.h $root$includedir/
    install -m 644 ../unix/tclUnixPort.h $root$includedir/
}

hook_add preconf 3 "cd unix"
hook_add postmake 5 ptcl
var_append makeopt ' ' 'RANLIB=true' # no ranlib on .so files, ...
