# --- T2-COPYRIGHT-BEGIN ---
# t2/package/*/pyenv/pyenv.desc
# Copyright (C) 2025 The T2 SDE Project
# SPDX-License-Identifier: GPL-2.0
# --- T2-COPYRIGHT-END ---

[I] Simple Python version management

[T] pyenv lets you easily switch between multiple versions of Python. It's
[T] simple, unobtrusive, and follows the UNIX tradition of single-purpose
[T] tools that do one thing well.

[U] https://github.com/pyenv/pyenv/

[A] Pyenv contributors
[M] The T2 Project <t2@t2-project.org>

[C] extra/development
[F] CROSS

[L] MIT
[S] Stable
[V] 2.6.8

[D] 2f0d0774f8876a78c25fb4697d58e7045084033ae89b8b35df2ef2a2 pyenv-2.6.8.tar.gz https://github.com/pyenv/pyenv/archive/v2.6.8/

runmake=0

hook_add inmake 5 pyenv_inmake

pyenv_inmake() {
	mkdir -p $root$datadir/$pkg/${pkg}.d/install \
		$root$datadir/$pkg/${pkg}.d/rehash \
		$root$datadir/$pkg/${pkg}.d/rehash/source.d \
		$root$datadir/$pkg/${pkg}.d/rehash/conda.d \
		$root$datadir/$pkg/plugins/python-build/bin \
		$root$datadir/$pkg/plugins/python-build/share/python-build

	install -m755 libexec/* $root$libexecdir/
	install -m755 plugins/python-build/bin/* $root$datadir/$pkg/plugins/python-build/bin/

	install -m644 pyenv.d/install/*.bash $root$datadir/$pkg/${pkg}.d/install/
	install -m644 pyenv.d/rehash/*.bash $root$datadir/$pkg/${pkg}.d/rehash/
	install -m644 pyenv.d/rehash/source.d/* $root$datadir/$pkg/${pkg}.d/rehash/source.d/
	install -m644 pyenv.d/rehash/conda.d/* $root$datadir/$pkg/${pkg}.d/rehash/conda.d/

	cp -a plugins/python-build/share $root$datadir/$pkg/plugins/python-build/

	ln -sv $root$libexecdir/$pkg $root$bindir/$pkg
	for x in pyenv-install pyenv-uninstall python-build; do
		ln -sv $root$datadir/$pkg/plugins/python-build/bin/$x $root$bindir/$x
	done
}
