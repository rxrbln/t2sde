# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: package/.../qcad/qcad.conf
# Copyright (C) 2004 - 2006 The T2 SDE Project
# Copyright (C) 1998 - 2003 ROCK Linux Project
# 
# More information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- T2-COPYRIGHT-NOTE-END ---

if [ $prefix_auto = 1 ] ; then
	prefix="opt/qcad"
	set_confopt
fi

var_append GCC_WRAPPER_REMOVE ' ' "-pedantic"

qcad_main() {
	# build qcad, then change to result directory
	libsuff=${libdir##*/lib}
	export QMAKESPEC=$QTDIR/mkspecs/linux-g++${libsuff:+-}${libsuff}
	cd scripts ; sh ./build_qcad.sh notrans ; cd ../qcad

	# copy executable
	cp -vf qcad $bindir/

	# copy application files
	mkdir -p $datadir/qcad
	for d in  examples fonts patterns qm data library machines scripts doc; do
		[ -d $d ] && cp -rvf $d $datadir/qcad
	done
}

custmain="qcad_main"

