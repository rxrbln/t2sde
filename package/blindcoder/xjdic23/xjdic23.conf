# --- ROCK-COPYRIGHT-NOTE-BEGIN ---
# 
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# Please add additional copyright information _after_ the line containing
# the ROCK-COPYRIGHT-NOTE-END tag. Otherwise it might get removed by
# the ./scripts/Create-CopyPatch script. Do not edit this copyright text!
# 
# ROCK Linux: rock-src/package/blindcoder/xjdic23/xjdic23.conf
# ROCK Linux is Copyright (C) 1998 - 2003 Clifford Wolf
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version. A copy of the GNU General Public
# License can be found at Documentation/COPYING.
# 
# Many people helped and are helping developing ROCK Linux. Please
# have a look at http://www.rocklinux.org/ and the Documentation/TEAM
# file for details.
# 
# --- ROCK-COPYRIGHT-NOTE-END ---

xjdic_main() {
	for x in edict kanjidic; do
		bunzip2 -c $archdir/$(echo $desc_D | cut -d' ' -f2 | grep $x) \
			> $x
	done
	make all
	./xjdxgen edict
	./xjdxgen kanjidic
	mkdir -p /opt/xjdic/bin
	mv exjdxgen xjdic_cl xjdic_sa xjdserver xjdxgen edict edict.xjdx \
		kanjidic kanjidic.xjdx gnu_licence \
		kanjstroke radicals.tm vconj radkfile romkana.cnv /opt/xjdic
	cat > /opt/xjdic/bin/xjdic << EOF
cd /opt/xjdic/
./xjdic_sa
EOF
	cat > /opt/xjdic/bin/xjdic_client << EOF
cd /opt/xjdic/
./xjdic_cl
EOF
	cat > /opt/xjdic/bin/xjdic_server << EOF
cd /opt/xjdic/
./xjdserver
EOF
	cat > /opt/xjdic/bin/xjdic_indexgen << EOF
cd /opt/xjdic/
./xjdxgen
EOF
	chmod a+x /opt/xjdic/bin/*
	rm -rf Makefile dotar23 exjdxgen.c exjdxgen.o gnu_licence \
		makekanjstroke.c xjdclient.c xjdclient.o xjdcomm.c \
		xjdcomm_cl.o xjdcomm_sa.o xjdcomm_sv.o xjdfrontend.c \
		xjdfrontend_cl.o xjdfrontend_sa.o xjdic.1 \
		xjdic.h xjdic22.WHATSNEW xjdic23.WHATSNEW xjdic23.inf \
		xjdic23.install xjdic23.tbz2 xjdrad.c xjdsa.c \
		xjdsa.o xjdservcomm.c xjdservcomm_sa.o xjdservcomm_sv.o \
		xjdserver.c xjdserver.o xjdxgen xjdxgen.c xjdxgen.o
																					     
}

custmain="xjdic_main"
srcdir="."
