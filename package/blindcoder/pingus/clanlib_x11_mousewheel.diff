Index: ./Sources/Display/Input/X11/mouse_x11.cpp
===================================================================
RCS file: /var/lib/cvs/Libs/ClanLib-0.6/Sources/Display/Input/X11/mouse_x11.cpp,v
retrieving revision 1.11
diff -u -r1.11 mouse_x11.cpp
--- ./Sources/Display/Input/X11/mouse_x11.cpp	17 May 2002 08:47:58 -0000	1.11
+++ ./Sources/Display/Input/X11/mouse_x11.cpp	30 Mar 2003 13:09:11 -0000
@@ -54,6 +54,8 @@
 	for (int i=0; i<NUM_MOUSE_BUTTONS; i++)
 		buttons[i] = new CL_InputButton_Mouse_XWin();
 	have_focus = false;
+
+        on_xevent_slot = CL_XWindow_CompatibleCard::sig_xevent.connect(this, &CL_Mouse_XWin::on_xevent);
 }
 
 CL_Mouse_XWin::~CL_Mouse_XWin()
@@ -63,6 +65,28 @@
 
 	for (int i=0; i<NUM_MOUSE_BUTTONS; i++) delete buttons[i];
 	delete[] buttons;
+}
+
+void
+CL_Mouse_XWin::on_xevent(XEvent& event)
+{
+  switch (event.type)
+    {
+    case ButtonPress:
+      {
+        if (event.xbutton.button == 4)
+          CL_Mouse::sig_button_press()(CL_Key(CL_MOUSE_WHEELUP, CL_Key::Pressed, -1, cursor->x, cursor->y));
+        else if (event.xbutton.button == 5)
+          CL_Mouse::sig_button_press()(CL_Key(CL_MOUSE_WHEELDOWN, CL_Key::Pressed, -1, cursor->x, cursor->y));
+      }
+      break;
+    case ButtonRelease:
+        if (event.xbutton.button == 4)
+          CL_Mouse::sig_button_release()(CL_Key(CL_MOUSE_WHEELUP, CL_Key::Released, -1, cursor->x, cursor->y));
+        else if (event.xbutton.button == 5)
+          CL_Mouse::sig_button_release()(CL_Key(CL_MOUSE_WHEELDOWN, CL_Key::Released, -1, cursor->x, cursor->y));
+      break;
+    }
 }
 
 CL_InputDevice::InputDeviceType CL_Mouse_XWin::get_type() const
Index: ./Sources/Display/Input/X11/mouse_x11.h
===================================================================
RCS file: /var/lib/cvs/Libs/ClanLib-0.6/Sources/Display/Input/X11/mouse_x11.h,v
retrieving revision 1.3
diff -u -r1.3 mouse_x11.h
--- ./Sources/Display/Input/X11/mouse_x11.h	17 May 2002 08:47:59 -0000	1.3
+++ ./Sources/Display/Input/X11/mouse_x11.h	30 Mar 2003 13:09:12 -0000
@@ -78,6 +78,7 @@
 	CL_InputButton_Mouse_XWin **buttons;
 	CL_InputCursor_Mouse_XWin *cursor;
 	CL_InputAxis_Mouse_XWin *axes;
+        CL_Slot on_xevent_slot;
 
 public:
 	CL_Mouse_XWin(CL_XWindow_CompatibleCard *card);
@@ -100,6 +101,8 @@
 	virtual CL_InputCursor *get_cursor(int cursor_num);
 
 	virtual void keep_alive();
+
+        void on_xevent(XEvent&);
 };
 
 #endif /* USE_X11 */
