#!/bin/sh
# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: package/.../wine/wine.conf
# Copyright (C) 2004 - 2005 The T2 SDE Project
# Copyright (C) 1998 - 2004 ROCK Linux Project
# 
# More information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- T2-COPYRIGHT-NOTE-END ---

wine_postmake() {
	cp documentation/samples/config $sysconfdir/wine.conf
	cp tools/wine.inf $sysconfdir

	#DOCUMENTATION
	cat > $docdir/ROCK_READ <<-'EOR'
Wine will need all devices such as floppies,
cdroms, and FAT partitions labelled as you
would use then inside Windows. If you would
like to run native Windows DLLs you can. Do
this all in etc/wine.conf or in ~/.wine/config
See documentation for help.

You need to create the following directories:
C:\windows
C:\windows\system
C:\windows\Start Menu
C:\windows\Start Menu\Programs

There is still a good deal of dependency on Microsoft
supplied programs and DLLs. The best way to get it working
is to cannibalize a Windows installation of DLLs as your
program requires them as well as any programs.
Running an application 'with --debugmsg +module,+file'
will help you determine what DLLs may be needed (Except
KERNEL32, GDI32, and USER32 which are part of wine). 
See: http://wine.codeweavers.com/docs/wine-user/no-windows.shtml
EOR
}

var_append makeinstopt ' ' 'UPDATE_DESKTOP_DATABASE=true'

hook_add premake 5 "eval $MAKE depend"
hook_add postmake 5 "wine_postmake"

# hack for configure ...
export ac_cv_lib_soname_jack=NONE

