# --- ROCK-COPYRIGHT-NOTE-BEGIN ---
# 
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# Please add additional copyright information _after_ the line containing
# the ROCK-COPYRIGHT-NOTE-END tag. Otherwise it might get removed by
# the ./scripts/Create-CopyPatch script. Do not edit this copyright text!
# 
# ROCK Linux: rock-src/package/jsaw/epplets-extra16/e-xmms.patch
# ROCK Linux is Copyright (C) 1998 - 2003 Clifford Wolf
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version. A copy of the GNU General Public
# License can be found at Documentation/COPYING.
# 
# Many people helped and are helping developing ROCK Linux. Please
# have a look at http://www.rocklinux.org/ and the Documentation/TEAM
# file for details.
# 
# --- ROCK-COPYRIGHT-NOTE-END ---

--- E-Xmms-0.3/configure.orig-rock-maint	2003-08-29 09:40:58.000000000 +0200
+++ E-Xmms-0.3/configure	2003-08-29 10:16:32.000000000 +0200
@@ -3702,51 +3702,6 @@
 fi
 
 
-echo $ac_n "checking for Epplet_Init in -lepplet""... $ac_c" 1>&6
-echo "configure:3707: checking for Epplet_Init in -lepplet" >&5
-ac_lib_var=`echo epplet'_'Epplet_Init | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lepplet $EPPLET_LIBS $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 3715 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char Epplet_Init();
-
-int main() {
-Epplet_Init()
-; return 0; }
-EOF
-if { (eval echo configure:3726: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  EPPLET_LIBS=-lepplet
-else
-  echo "$ac_t""no" 1>&6
-
-echo "Error : cannot link epplet library"
-{ echo "configure: error: Fatal Error : Epplet library file libepplet.so not found" 1>&2; exit 1; }
-fi
-
-
-
 # Extract the first word of "imlib-config", so it can be a program name with args.
 set dummy imlib-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -4083,6 +4038,50 @@
 
 
 fi
+
+echo $ac_n "checking for Epplet_Init in -lepplet""... $ac_c" 1>&6
+echo "configure:3707: checking for Epplet_Init in -lepplet" >&5
+ac_lib_var=`echo epplet'_'Epplet_Init | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lepplet `$IMLIB_CONFIG --libs` -L$E16/lib $EPPLET_LIBS $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 3715 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char Epplet_Init();
+
+int main() {
+Epplet_Init()
+; return 0; }
+EOF
+if { (eval echo configure:3726: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  EPPLET_LIBS=-lepplet
+else
+  echo "$ac_t""no" 1>&6
+
+echo "Error : cannot link epplet library"
+{ echo "configure: error: Fatal Error : Epplet library file libepplet.so not found" 1>&2; exit 1; }
+fi
+
 #
 # ok enlightenment d00ds want to ignore civilization and install
 # everything in one place. The rest of use prefer sanity.
