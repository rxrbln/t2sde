# --- ROCK-COPYRIGHT-NOTE-BEGIN ---
# 
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# Please add additional copyright information _after_ the line containing
# the ROCK-COPYRIGHT-NOTE-END tag. Otherwise it might get removed by
# the ./scripts/Create-CopyPatch script. Do not edit this copyright text!
# 
# ROCK Linux: rock-src/package/*/pine/pine.conf
# Copyright (C) 1998 - 2003 ROCK Linux Project
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version. A copy of the GNU General Public
# License can be found at Documentation/COPYING.
# 
# Many people helped and are helping developing ROCK Linux. Please
# have a look at http://www.rocklinux.org/ and the Documentation/TEAM
# file for details.
# 
# --- ROCK-COPYRIGHT-NOTE-END ---

# build with shadow only
BUILD_TYPE=slx

pine_main() {
	./build $BUILD_TYPE SSLTYPE=unix SSLDIR=/usr
	cp -fv bin/* $bindir/

	mkdir -p $docdir/imap
	rm -rf imap/docs/rfc/
	cp -rfv imap/docs/ $docdir/imap/

	# install the man-pages
	cp -fv imap/src/imapd/imapd.8c $mandir/man8/imapd.8
	mv -v doc/{pico.1,pilot.1,pine.1} $mandir/man1/

	echo "Copying c-client library to $root/$prefix/lib"
	cp -fv imap/c-client/c-client.a $libdir/
	mkdir -p $includedir/c-client
	cp -fv imap/c-client/*.h $includedir/c-client/
	ln -sfv c-client.a $libdir/libc-client.a
}

var_append INSTALL_WRAPPER_FILTER "|" \
	'sed -e "s,bin/imapd,bin/imapd_pine," \
	     -e "s,man8/imapd.8,man8/imapd_pine.8,"'

custmain="pine_main"

