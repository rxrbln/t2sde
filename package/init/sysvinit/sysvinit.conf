# --- T2-COPYRIGHT-NOTE-BEGIN ---
# T2 SDE: package/*/sysvinit/sysvinit.conf
# Copyright (C) 2004 - 2023 The T2 SDE Project
# Copyright (C) 1998 - 2003 ROCK Linux Project
# 
# This Copyright note is generated by scripts/Create-CopyPatch,
# more information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 2.
# --- T2-COPYRIGHT-NOTE-END ---

# T2 default
DISTRO="T2"

# T2 that does not use the sysV Init system if it's not _the_ Init,
# don't build init and runlevel, we only want the tools.
if [ "$SDECFG_INIT" != "$pkg" ]; then
	DISTRO="T2-no-init"
else
	hook_add postmake 5 "[ -f $root/etc/inittab ] || cp $confdir/etc_inittab.txt $root/etc/"
	hook_add postmake 7 "touch $root/etc/inittab"
fi

hook_add premake 5 "cd src"
var_append makeopt ' ' 'LCRYPT=-lcrypt LUTIL=-lutil ROOT=$root DISTRO=$DISTRO all'
var_append makeinstopt ' ' 'LCRYPT=-lcrypt LUTIL=-lutil ROOT=$root DISTRO=$DISTRO install'

hook_add postmake 5 '$CC -Wall $confdir/rc.c -o $root/sbin/rc'
