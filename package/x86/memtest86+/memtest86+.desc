[COPY] --- T2-COPYRIGHT-BEGIN ---
[COPY] t2/package/*/memtest86/memtest86.desc
[COPY] Copyright (C) 2004 - 2025 The T2 SDE Project
[COPY] Copyright (C) 1998 - 2003 ROCK Linux Project
[COPY] SPDX-License-Identifier: GPL-2.0
[COPY] --- T2-COPYRIGHT-END ---

[I] A stand-alone memory diagnostic program for x86

[T] Based on the well-known original memtest86 written by Chris Brady,
[T] memtest86+ is a port by some members of the x86-secret team. The goal
[T] is to provide an up-to-date and completly reliable version of this
[T] software tool aimed at memory failures detection.
[T]
[T] Memtest86+ is, like the original, released under the terms of the Gnu
[T] Public License (GPL). No restrictions for use, private or commercial
[T] exist other than the ones mentioned in the Gnu Public License
[T] (GPL). Texts about the original version was taken from the original
[T] website and written by Chris Brady.

[U] https://www.memtest.org/

[A] Chris Brady <cbrady@sgi.com>
[A] Samuel DEMEULEMEESTER <memtest@memtest.org>
[M] Rene Rebe <rene@t2-project.org>

[C] base/tool
[F] CROSS NO-LTO NO-SSP NO-PIE
[R] + loongarch64 x86 x86-64

[L] GPL
[S] Stable
[V] 7.20

[CV-URL] http://www.memtest.org/
[D] add922e8dd57cdc56f2006dbc326aaba3131599adf3759aa7646f15f memtest86+-7.20.tar.gz https://github.com/memtest86plus/memtest86plus/archive/v7.20/

# somehow higher optimizations do not inline the built-in memset and memcpy :-/
CC_WRAPPER_INSERT=-Os

case $arch in
	loongarch64) hook_add preconf 5 "cd build64/la64" ;;
	x86) hook_add preconf 5 "cd build32" ;;
	x86-64) hook_add preconf 5 "cd build64" ;;
esac

makeinstopt=
[ $arch != loongarch64 ] && hook_add postmake 4 "install memtest.bin $root/boot/memtest86.bin"
hook_add postmake 4 "install memtest.efi $root/boot/memtest86.efi"
