# --- T2-COPYRIGHT-NOTE-BEGIN ---
# T2 SDE: package/*/evolution/evolution.conf
# Copyright (C) 2004 - 2021 The T2 SDE Project
# Copyright (C) 1998 - 2004 ROCK Linux Project
# 
# This Copyright note is generated by scripts/Create-CopyPatch,
# more information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 2.
# --- T2-COPYRIGHT-NOTE-END ---

. $base/package/*/*/evolution-conf.in

var_append confopt ' ' '--enable-nntp=yes'

#TODO, we don't have NetworkManager yet
var_append confopt ' ' '--disable-nm'

# Enable support for building pilot conduits.
pkginstalled gnome-pilot-conduits && var_append confopt ' ' '--enable-pilot-conduits=yes'

# Add Mono embedded hooks.
pkginstalled mono && var_append confopt ' ' "--enable-mono"

# Enable the usage of the GtkFileChooser in place of the GtkFileSelection dialog
var_append confopt ' ' '--enable-file-chooser'

# Enable plugins: no/base/all/experimental/list
var_append confopt ' ' "--enable-plugins=all"

pkginstalled gtkimageview || var_append extraconfopt ' ' "--disable-image-inline"
pkginstalled libpst || var_append extraconfopt ' ' "--disable-pst-import"

# FIXME Check following options:
# --with-krb5=DIR      Location of Kerberos 5 install dir
# --with-krb5-libs=DIR Location of Kerberos 5 libraries
# --with-krb5-includes=DIR Location of Kerberos 5 headers
# --with-krb4=DIR      Location of Kerberos 4 install dir
# --with-krb4-libs=DIR Location of Kerberos 4 libraries
# --with-krb4-includes=DIR Location of Kerberos 4 headers
# --with-html-dir=PATH path to installed docs
# --with-gconf-source=sourceaddress      Config database for installing schema files.
# --with-gconf-schema-file-dir=dir        Directory for installing schema files.
# --with-sub-version=VERSION Specify a sub-version string
# --with-kde-applnk-path=PATH    Location of KDE applnk files 	

# currently only used with openldap path inside configure script (see
# openldap-libsuff.patch)
export libsuff=${libdir##*/lib}

if pkginstalled openldap; then
	pkgprefix -t openldap
	var_append confopt ' ' '--enable-ldap'
	var_append GCC_WRAPPER_INSERT ' ' "-I$( pkgprefix includedir openldap )"
	var_append GCC_WRAPPER_INSERT ' ' "-L$( pkgprefix libdir openldap )"
fi
