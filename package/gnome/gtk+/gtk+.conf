# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by scripts/Create-CopyPatch.
# 
# T2 SDE: package/*/gtk+/gtk+.conf
# Copyright (C) 2004 - 2021 The T2 SDE Project
# Copyright (C) 1998 - 2004 ROCK Linux Project
# 
# More information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- T2-COPYRIGHT-NOTE-END ---

runmeson=0

var_append confopt ' ' '--with-xinput=yes --enable-x11-backend'
pkginstalled glitz && var_append confopt ' ' "--enable-glitz"
pkginstalled libtiff || var_append extraconfopt ' ' --without-libtiff
pkginstalled jasper || var_append extraconfopt ' ' --without-libjasper

# guide, mostly for cross compiling
pkginstalled wayland-protocols &&
	var_append confopt ' ' '--enable-wayland-backend' ||
	var_append confopt ' ' '--disable-wayland-backend'

atstage cross && var_append makeopt ' ' 'GLIB_MKENUMS=glib-mkenums GLIB_COMPILE_RESOURCES=glib-compile-resources'
atstage cross && var_append makeopt ' ' 'GLIB_GENMARSHAL=glib-genmarshal'

var_append INSTALL_WRAPPER_FILTER '|' \
	'sed s/gtk-update-icon-cache/gtk3-update-icon-cache/'

[ $arch = powerpc64 ] && var_append GCC_WRAPPER_APPEND ' ' -mminimal-toc
