# --- T2-COPYRIGHT-NOTE-BEGIN ---
# T2 SDE: package/*/gnustep-make/gnustep-conf.in
# Copyright (C) 2007 - 2024 The T2 SDE Project
# 
# This Copyright note is generated by scripts/Create-CopyPatch,
# more information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 2.
# --- T2-COPYRIGHT-NOTE-END ---

if [ "$prefix_auto" = 1 ]; then
	if [ "$1" == "NO_SANITY_CHECK" ]; then
		if [ "$SDECFG_PKG_GNUSTEP_CORE_PREFIX" ]; then
			prefix="$SDECFG_PKG_GNUSTEP_CORE_PREFIX"
		else
			prefix="usr"
		fi
	elif pkginstalled -n gnustep-make; then
		pkgprefix -t gnustep-make
		prefix=`pkgprefix gnustep-make`
	fi
	set_confopt
fi

# allow non-FHS top-level directories
# TODO: Fix to not use System/* and Local/* but /Application, /System,
#	/Library top-level directories, directly.
var_append flistroot ' ' 'System Library Local'

if pkgprefix -t gnustep-make; then
	. /$(pkgprefix gnustep-make)/share/GNUstep/Makefiles/GNUstep.sh
fi

hook_add preconf 5 "echo 'gs_cv_objc_compiler_supports_constant_string_class=yes' >> config.cache"
