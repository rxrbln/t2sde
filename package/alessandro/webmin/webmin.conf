# --- ROCK-COPYRIGHT-NOTE-BEGIN ---
# 
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# Please add additional copyright information _after_ the line containing
# the ROCK-COPYRIGHT-NOTE-END tag. Otherwise it might get removed by
# the ./scripts/Create-CopyPatch script. Do not edit this copyright text!
# 
# ROCK Linux: rock-src/package/alessandro/webmin/webmin.conf
# ROCK Linux is Copyright (C) 1998 - 2003 Clifford Wolf
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version. A copy of the GNU General Public
# License can be found at Documentation/COPYING.
# 
# Many people helped and are helping developing ROCK Linux. Please
# have a look at http://www.rocklinux.org/ and the Documentation/TEAM
# file for details.
# 
# --- ROCK-COPYRIGHT-NOTE-END ---

pkg_webmin_main() {
	[ -a $root/opt/$pkg ] && rm -Rf $root/opt/$pkg
	mkdir $root/opt/$pkg
	mv -f * $root/opt/$pkg
	cd $root/opt/$pkg

	export config_dir=$sysconfdir
	export var_dir=/var/webmin
	export perldef=/usr/bin/perl

	export os_type="generic-linux"
	export real_os_type="generic-linux"
	export real_os_version="2.4"

	export port=10000
	export login="admin"
	export password=""

	if grep -q ' openssl ' $base/config/$config/packages ; then
		export ssl=1
	else
		export ssl=0
	fi
	export atboot=1
	export nostart=1
	export makeboot=0

	./setup.sh

	install_init webmin $confdir/webmin.init
	cp $confdir/stone_mod_webmin.sh $root/etc/stone.d/mod_webmin.sh

	unset config_dir var_dir perldef os_type real_os_type
	unset real_os_version port login password ssl atboot makeboot
}

createprefix=0
custmain=pkg_webmin_main
sysconfdir=/etc/webmin
export prefix=/opt/webmin
