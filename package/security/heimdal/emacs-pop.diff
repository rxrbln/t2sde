diff -urN emacs-21.4.orig/lib-src/pop.c emacs-21.4/lib-src/pop.c
--- emacs-21.4.orig/lib-src/pop.c	2002-05-17 13:26:37.000000000 +0200
+++ emacs-21.4/lib-src/pop.c	2005-08-16 16:17:31.121406750 +0200
@@ -1188,16 +1188,16 @@
       krb5_free_principal (kcontext, server);
       if (rem)
 	{
-	  if (err_ret && err_ret->text.length)
+	  if (err_ret && err_ret->e_data->length)
 	    {
 	      strcpy (pop_error, KRB_ERROR);
 	      strncat (pop_error, error_message (rem),
 		       ERROR_MAX - sizeof (KRB_ERROR));
 	      strncat (pop_error, " [server says '",
 		       ERROR_MAX - strlen (pop_error) - 1);
-	      strncat (pop_error, err_ret->text.data,
+	      strncat (pop_error, err_ret->e_data->data,
 		       min (ERROR_MAX - strlen (pop_error) - 1,
-			    err_ret->text.length));
+			    err_ret->e_data->length));
 	      strncat (pop_error, "']",
 		       ERROR_MAX - strlen (pop_error) - 1);
 	    }
diff -urN emacs-21.4.orig/src/config.in emacs-21.4/src/config.in
--- emacs-21.4.orig/src/config.in	2002-07-09 00:23:31.000000000 +0200
+++ emacs-21.4/src/config.in	2005-08-16 16:21:06.554870500 +0200
@@ -198,12 +198,12 @@
 #undef HAVE_LIBKRB4
 #undef HAVE_LIBDES
 #undef HAVE_LIBDES425
-#undef HAVE_LIBKRB5
+#define HAVE_LIBKRB5
 #undef HAVE_LIBCRYPTO
 #undef HAVE_LIBK5CRYPTO
 #undef HAVE_LIBCOM_ERR
 /* header files */
-#undef HAVE_KRB5_H
+#define HAVE_KRB5_H
 #undef HAVE_DES_H
 #undef HAVE_KRB_H
 #undef HAVE_KERBEROSIV_DES_H
@@ -213,7 +213,7 @@
 #undef HAVE_COM_ERR_H
 
 /* GSS-API libraries and headers */
-#undef HAVE_LIBGSSAPI_KRB5
+#define HAVE_LIBGSSAPI_KRB5
 #undef HAVE_LIBGSSAPI
 #undef HAVE_GSSAPI_H
 
