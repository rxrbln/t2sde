# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: package/.../kdebase/sasl2.patch
# Copyright (C) 2004 - 2005 The T2 SDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- T2-COPYRIGHT-NOTE-END ---
They want sasl2 on sasl/sasl.h, but we have it on sasl2/sasl.h
Alejandro Mery

--- ./config.h.in.orig	2005-03-11 17:24:54.409078000 -0300
+++ ./config.h.in	2005-03-11 17:26:59.577049576 -0300
@@ -285,8 +285,8 @@
 /* Define to 1 if you have the <sasl.h> header file. */
 #undef HAVE_SASL_H
 
-/* Define to 1 if you have the <sasl/sasl.h> header file. */
-#undef HAVE_SASL_SASL_H
+/* Define to 1 if you have the <sasl2/sasl.h> header file. */
+#undef HAVE_SASL2_SASL_H
 
 /* Define to 1 if you have the <sensors/sensors.h> header file. */
 #undef HAVE_SENSORS_SENSORS_H
--- ./configure.orig	2005-03-11 17:24:54.643042432 -0300
+++ ./configure	2005-03-11 17:27:00.146962936 -0300
@@ -48988,7 +48988,7 @@
 
 
 
-for ac_header in sasl/sasl.h
+for ac_header in sasl2/sasl.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
--- ./configure.in.orig	2005-03-11 17:24:55.770870976 -0300
+++ ./configure.in	2005-03-11 17:27:00.206953816 -0300
@@ -1177,7 +1177,7 @@
 SASL2_LIBS=""
 
 KDE_CHECK_HEADERS(sasl.h)dnl SASL1 header is enough for kio_ldap
-KDE_CHECK_HEADERS(sasl/sasl.h, sasl2_header="yes")
+KDE_CHECK_HEADERS(sasl2/sasl.h, sasl2_header="yes")
 if test "$sasl2_header" = "yes" ; then
   KDE_CHECK_LIB(sasl2, sasl_client_init, SASL2_LIBS="-lsasl2")
 fi
--- ./kioslave/ldap/kio_ldap.cpp.orig	2005-03-11 17:24:55.811864744 -0300
+++ ./kioslave/ldap/kio_ldap.cpp	2005-03-11 17:27:00.226950776 -0300
@@ -21,8 +21,8 @@
 #include <kinstance.h>
 #include <klocale.h>
 
-#ifdef HAVE_SASL_SASL_H //prefer libsasl2
-#include <sasl/sasl.h>
+#ifdef HAVE_SASL2_SASL_H //prefer libsasl2
+#include <sasl2/sasl.h>
 #else
 #ifdef HAVE_SASL_H
 #include <sasl.h>
@@ -530,7 +530,7 @@
 
 int LDAPProtocol::saslInteract( void *in )
 {
-#if defined HAVE_SASL_H || defined HAVE_SASL_SASL_H
+#if defined HAVE_SASL_H || defined HAVE_SASL2_SASL_H
   AuthInfo info;
   fillAuthInfo( info );
 
@@ -661,7 +661,7 @@
     }
   }
 
-#if !defined HAVE_SASL_H && !defined HAVE_SASL_SASL_H
+#if !defined HAVE_SASL_H && !defined HAVE_SASL2_SASL_H
   if ( mAuthSASL ) {
     closeConnection();
     error( ERR_SLAVE_DEFINED, 
@@ -699,7 +699,7 @@
     }
     kdDebug(7125) << "user: " << mUser << " bindname: " << mBindName << endl;
     ret = 
-#if defined HAVE_SASL_H || defined HAVE_SASL_SASL_H
+#if defined HAVE_SASL_H || defined HAVE_SASL2_SASL_H
       mAuthSASL ? 
         ldap_sasl_interactive_bind_s( mLDAP, NULL, mechanism.utf8(), 
           NULL, NULL, LDAP_SASL_INTERACTIVE, &kldap_sasl_interact, this ) :
--- ./kioslave/pop3/pop3.cc.orig	2005-03-11 17:24:55.883853800 -0300
+++ ./kioslave/pop3/pop3.cc	2005-03-11 17:27:00.246947736 -0300
@@ -43,7 +43,7 @@
 
 #ifdef HAVE_LIBSASL2
 extern "C" {
-#include <sasl/sasl.h>
+#include <sasl2/sasl.h>
 }
 #endif
 
--- ./kioslave/smtp/command.h.orig	2005-03-11 17:24:55.905850456 -0300
+++ ./kioslave/smtp/command.h	2005-03-11 17:27:00.255946368 -0300
@@ -38,7 +38,7 @@
 
 #ifdef HAVE_LIBSASL2
 extern "C" {
-#include <sasl/sasl.h>
+#include <sasl2/sasl.h>
 }
 #endif
 
--- ./kioslave/smtp/smtp.cc.orig	2005-03-11 17:24:55.921848024 -0300
+++ ./kioslave/smtp/smtp.cc	2005-03-11 17:27:00.267944544 -0300
@@ -32,7 +32,7 @@
 
 #ifdef HAVE_LIBSASL2
 extern "C" {
-#include <sasl/sasl.h>
+#include <sasl2/sasl.h>
 }
 #endif
 
--- ./kioslave/configure.in.in.orig	2005-03-11 17:24:55.955842856 -0300
+++ ./kioslave/configure.in.in	2005-03-11 17:27:00.272943784 -0300
@@ -4,7 +4,7 @@
 SASL2_LIBS=""
 
 KDE_CHECK_HEADERS(sasl.h)dnl SASL1 header is enough for kio_ldap
-KDE_CHECK_HEADERS(sasl/sasl.h, sasl2_header="yes")
+KDE_CHECK_HEADERS(sasl2/sasl.h, sasl2_header="yes")
 if test "$sasl2_header" = "yes" ; then
   KDE_CHECK_LIB(sasl2, sasl_client_init, SASL2_LIBS="-lsasl2")
 fi
