[COPY] --- T2-COPYRIGHT-BEGIN ---
[COPY] t2/package/*/cups/cups.desc
[COPY] Copyright (C) 2004 - 2025 The T2 SDE Project
[COPY] Copyright (C) 1998 - 2003 ROCK Linux Project
[COPY] SPDX-License-Identifier: GPL-2.0
[COPY] --- T2-COPYRIGHT-END ---

[I] Common Unix Printing System

[T] CUPS provides a portable printing layer for UNIX(r)-based operating
[T] systems. It has been developed by Easy Software Products to provide
[T] a standard printing solution for all UNIX vendors and users. CUPS
[T] provides the System V and Berkeley command-line interfaces.
[T]
[T] CUPS uses the Internet Printing Protocol (IETF-IPP) as the basis
[T] for managing print jobs and queues. The Line Printer Daemon (LPD,
[T] RFC1179), Server Message Block (SMB), and AppSocket protocols are
[T] also supported with reduced functionality. CUPS adds network printer
[T] browsing and PostScript Printer Description ("PPD")-based printing
[T] options to support real world applications under UNIX.
[T]
[T] CUPS also includes a customized version of GNU GhostScript (currently
[T] based off GNU GhostScript 4.03) and an image file RIP that can be
[T] used to support non-PostScript printers.

[U] https://openprinting.github.io/cups/

[A] Easy Software Products
[A] Apple Inc.
[M] Rene Rebe <rene@t2-project.org>

[C] extra/server extra/printing
[F] PRINTER CROSS LATOMIC.sparc

[E] opt acl

[L] GPL
[S] Stable
[V] 2.4.13
[P] X -----5---9 122.900

[D] 1d61b1262f5c843c3f57afb059e8e2536b8449a02f4656ea95a05997 cups-2.4.13-source.tar.gz https://github.com/OpenPrinting/cups/releases/download/v2.4.13/

cups_pm(){
	install_setprinter cups

	# cups is too stupid to create the ../tmp dir itself - only
	# needed for some ipp transfers (...?) -ReneR
	mkdir -p $root/var/spool/cups/tmp
	chown daemon:daemon $root/var/spool/cups/tmp

	mkdir -p $root$datadir/cups/drivers
}
hook_add postmake 5 cups_pm

# shared file transformation
var_append INSTALL_WRAPPER_FILTER '|' \
	   "sed -e 's,bin/\(disable\|enable\|cancel\|lp\|lpq\|lpr\|lpc\|lprm\|lpstat\)$,bin/\1_cups,g'"

pkginstalled krb5 || var_append confopt ' ' --disable-gssapi
var_append confopt ' ' --with-logdir=/var/cups/log
var_append makeopt ' ' "INITDIR= INITDDIR=''"
var_append makeinstopt ' ' "INITDIR= INITDDIR=''"
