diff -ruN hostap-driver-0.2.1/Makefile hostap-driver-0.2.1-new/Makefile
--- hostap-driver-0.2.1/Makefile	2004-04-29 06:39:27.000000000 +0200
+++ hostap-driver-0.2.1-new/Makefile	2004-06-02 12:29:02.271802208 +0200
@@ -62,6 +62,7 @@
 
 MSRC=driver/modules
 
+
 # if Rules.make exists in the kernel tree, we assume 2.4 style modules
 # if it doesn't assume 2.6 style
 OLDMAKE = $(wildcard $(KERNEL_PATH)/Rules.make)
@@ -90,6 +91,7 @@
 endif
 
 2.4:
+	echo "Kernelver: $(KERNELVER) Kernelrelease: $(KERNELRELEASE) Modpath: $(MODPATH)"
 	@if ! echo "$(KERNELRELEASE)" | grep -q "^2\.4"; then \
 		echo "*** Can't build for 2.4 with a non-2.4 source!"; \
 		exit 1; \
@@ -98,6 +100,7 @@
 	$(MAKE) install_all_info
 
 2.6:
+	echo "Kernelver: $(KERNELVER) Kernelrelease: $(KERNELRELEASE) Modpath: $(MODPATH)"
 	@if ! echo "$(KERNELRELEASE)" | grep -q "^2\.6" && \
 	    ! echo "$(KERNELRELEASE)" | grep -q "^2\.5"; then \
 		echo "*** Can't build for 2.6 with a non-2.6 source!"; \
@@ -142,12 +145,7 @@
 	@if [ -r $(MODPATH)/kernel/drivers/net/wireless/hostap_crypt.ko ]; then \
 		echo "You may need to remove old $(MODPATH)/kernel/drivers/net/wireless/hostap_crypt.ko"; \
 	fi
-	@if [ -f "/boot/System.map-$(KERNELRELEASE)" ] || [ "$(CURRENTKV)" = "$(KERNELRELEASE)" ]; then \
-		echo "*** Running depmod..."; \
-		/sbin/depmod -ae; \
-	else \
-		echo "*** I won't run depmod because I can't find an appropriate System.map file or you are not running the same kernel as the one you are building against. Please run it manually when the conditions are correct..."; \
-	fi
+	echo "ROCKLinux: not running depmod in build."
 
 install_hostap: $(MSRC)/hostap.o
 	@echo "Installing hostap.o to $(MODPATH_PCI)"
@@ -167,7 +165,7 @@
 	mkdir -p $(MODPATH_CS)
 	cp -f $(MSRC)/$(MODULE_CS) $(MODPATH_CS)
 ifndef DESTDIR
-	/sbin/depmod -ae
+	echo "ROCKLinux: not running depmod in build."
 endif
 
 install_conf:
@@ -183,13 +181,13 @@
 	@echo "Installing $(MODULE_PLX) to $(MODPATH_PLX)"
 	mkdir -p $(MODPATH_PLX)
 	cp -f $(MSRC)/$(MODULE_PLX) $(MODPATH_PLX)
-	/sbin/depmod -ae
+	echo "ROCKLinux: not running depmod in build."
 
 install_pci: install_check install_crypt install_hostap
 	@echo "Installing $(MODULE_PCI) to $(MODPATH_PCI)"
 	mkdir -p $(MODPATH_PCI)
 	cp -f $(MSRC)/$(MODULE_PCI) $(MODPATH_PCI)
-	/sbin/depmod -ae
+	echo "ROCKLinux: not running depmod in build."
 
 uninstall:
 	find $(MODPATH) -name "hostap*" | xargs rm -f
