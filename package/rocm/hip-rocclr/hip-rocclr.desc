[COPY] --- T2-COPYRIGHT-BEGIN ---
[COPY] t2/package/*/hip-rocclr/hip-rocclr.desc
[COPY] Copyright (C) 2024 - 2025 The T2 SDE Project
[COPY] SPDX-License-Identifier: GPL-2.0
[COPY] --- T2-COPYRIGHT-END ---

[I] AMD Compute Language Runtime

[T] AMD CLR (Compute Language Runtime) contains source codes for AMD's compute
[T] languages runtimes: HIP and OpenCLâ„¢. - hipamd - contains implementation
[T] of HIP language on AMD platform.

[U] https://github.com/ROCm/clr

[A] Advanced Micro Devices, Inc.
[M] The T2 Project <t2@t2-project.org>

[F] CROSS
[C] extra/development

[E] add cppheaderparser
[E] add hipcc
[E] opt doxygen

[L] MIT
[S] Stable
[V] 7.0.0
[P] X -----5---9 300.188

[CV-GROUP] rocm
[D] e4a82b39a3eff9ee58f4a9dab8b4dba19f8229692a6e0ea129bb0623 clr-rocm-7.0.0.tar.gz https://github.com/ROCm/clr/archive/rocm-7.0.0/
[D] e3f7a63cb9f3d03a6afba85acba254ef675efec731eac8d0fda6309f HIP-rocm-7.0.0.tar.gz https://github.com/ROCm/HIP/archive/rocm-7.0.0/
[D] 9fcd03c39f2188b530914c0ddd6f1a246e8cfa23d9dd8a6e46d09bc5 hipother-rocm-7.0.0.tar.gz https://github.com/ROCm/hipother/archive/rocm-7.0.0/
[D] 0a12eeaeccb4a1b073250c86884011d819b28cbfce1c705465fbc965 hip-tests-rocm-7.0.0.tar.gz https://github.com/ROCm/hip-tests/archive/rocm-7.0.0/

. $base/package/*/*/rocm-conf.in
var_append cmakeopt ' ' "-DCMAKE_INSTALL_LIBDIR=${libdir##*/}"

extract_hip() {
        tar $taropt `match_source_file -p HIP`
        var_append cmakeopt ' ' "-DHIP_COMMON_DIR=$(echo $PWD/hip-*)"
}
hook_add prepatch 5 extract_hip

var_append cmakeopt ' ' "-DCLR_BUILD_HIP=ON -DCLR_BUILD_OCL=OFF"
var_append cmakeopt ' ' -DBUILD_SHARED_LIBS=YES
var_append cmakeopt ' ' "-DHIP_COMPILER=clang -DHIP_PLATFORM=amd"
var_append cmakeopt ' ' "-DCMAKE_HIP_ARCHITECTURES=OFF -DHIP_CATCH_TEST=1"
