# --- ROCK-COPYRIGHT-NOTE-BEGIN ---
# 
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# Please add additional copyright information _after_ the line containing
# the ROCK-COPYRIGHT-NOTE-END tag. Otherwise it might get removed by
# the ./scripts/Create-CopyPatch script. Do not edit this copyright text!
# 
# ROCK Linux: rock-src/package/mnemoc/boehm-gc/gcc3-use_system_gc.diff
# ROCK Linux is Copyright (C) 1998 - 2003 Clifford Wolf
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version. A copy of the GNU General Public
# License can be found at Documentation/COPYING.
# 
# Many people helped and are helping developing ROCK Linux. Please
# have a look at http://www.rocklinux.org/ and the Documentation/TEAM
# file for details.
# 
# --- ROCK-COPYRIGHT-NOTE-END ---

--- ./Makefile.in.orig	2003-09-02 20:37:57.000000000 -0400
+++ ./Makefile.in	2003-09-02 20:40:35.000000000 -0400
@@ -799,7 +799,6 @@
 	all-target-libffi \
 	all-target-libjava \
 	all-target-zlib \
-	all-target-boehm-gc \
 	all-target-qthreads \
 	all-target-bsp \
 	all-target-cygmon
@@ -822,7 +821,6 @@
 	configure-target-libffi \
 	configure-target-libjava \
 	configure-target-zlib \
-	configure-target-boehm-gc \
 	configure-target-qthreads \
 	configure-target-bsp \
 	configure-target-cygmon
@@ -839,7 +837,6 @@
 	check-target-libffi \
 	check-target-libjava \
 	check-target-zlib \
-	check-target-boehm-gc \
 	check-target-qthreads \
 	check-target-gperf
 
@@ -857,7 +854,6 @@
 	install-target-bsp \
 	install-target-libjava \
 	install-target-zlib \
-	install-target-boehm-gc \
 	install-target-qthreads \
 	install-target-gperf
 
@@ -947,7 +943,6 @@
 	clean-target-libffi \
 	clean-target-libjava \
 	clean-target-zlib \
-	clean-target-boehm-gc \
 	clean-target-qthreads \
 	clean-target-bsp \
 	clean-target-cygmon
@@ -1714,8 +1709,6 @@
 all-bfd: all-libiberty all-intl
 all-binutils: all-libiberty all-opcodes all-bfd all-flex all-bison all-byacc all-intl
 all-bison: all-texinfo
-configure-target-boehm-gc: $(ALL_GCC_C) configure-target-qthreads
-all-target-boehm-gc: configure-target-boehm-gc
 configure-target-bsp: $(ALL_GCC_C)
 all-target-bsp: configure-target-bsp
 all-byacc:
@@ -1770,8 +1763,8 @@
 
 configure-target-libffi: $(ALL_GCC_C) 
 all-target-libffi: configure-target-libffi
-configure-target-libjava: $(ALL_GCC_C) configure-target-zlib configure-target-boehm-gc configure-target-qthreads configure-target-libffi
-all-target-libjava: configure-target-libjava all-fastjar all-target-zlib all-target-boehm-gc all-target-qthreads all-target-libffi
+configure-target-libjava: $(ALL_GCC_C) configure-target-zlib configure-target-qthreads configure-target-libffi
+all-target-libjava: configure-target-libjava all-fastjar all-target-zlib all-target-qthreads all-target-libffi
 configure-target-librx: $(ALL_GCC_C)
 all-target-librx: configure-target-librx
 configure-target-libstdc++-v3: $(ALL_GCC_C)
--- ./libjava/configure.orig	2003-09-02 20:40:47.000000000 -0400
+++ ./libjava/configure	2003-09-02 20:42:22.000000000 -0400
@@ -3132,12 +3132,12 @@
 case "$GC" in
  boehm)
     echo "$ac_t""boehm" 1>&6
-    GCLIBS=../boehm-gc/libgcjgc_convenience.la
-    GCINCS='-I$(top_srcdir)/../boehm-gc/include'
+    GCLIBS='$(prefix)/lib/libgc.la'
+    GCINCS='-I$(prefix)/include/gc'
     JC1GCSPEC='-fuse-boehm-gc'
-    GCTESTSPEC="-L`pwd`/../boehm-gc/.libs -rpath `pwd`/../boehm-gc/.libs"
+    #GCTESTSPEC="-L`pwd`/../boehm-gc/.libs -rpath `pwd`/../boehm-gc/.libs"
 
-            GCINCS="$GCINCS `cat ../boehm-gc/boehm-cflags`"
+    #        GCINCS="$GCINCS `cat ../boehm-gc/boehm-cflags`"
     GCOBJS=boehm.lo
     GCHDR=boehm-gc.h
         cat >> confdefs.h <<\EOF
--- ./libjava/libltdl/configure.orig	2003-09-02 20:42:37.000000000 -0400
+++ ./libjava/libltdl/configure	2003-09-02 20:43:27.000000000 -0400
@@ -2508,8 +2508,8 @@
 
 GCINCS=
 if test "$GC" = "boehm"; then
-   GCINCS='-I$(top_srcdir)/../../boehm-gc/include'
-   GCINCS="$GCINCS `cat ../../boehm-gc/boehm-cflags`"
+   GCINCS='-I$(prefix)/include/gc'
+   #GCINCS="$GCINCS `cat ../../boehm-gc/boehm-cflags`"
    cat >> confdefs.h <<\EOF
 #define HAVE_BOEHM_GC 1
 EOF
