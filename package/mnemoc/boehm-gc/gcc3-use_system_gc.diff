# --- ROCK-COPYRIGHT-NOTE-BEGIN ---
# 
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# Please add additional copyright information _after_ the line containing
# the ROCK-COPYRIGHT-NOTE-END tag. Otherwise it might get removed by
# the ./scripts/Create-CopyPatch script. Do not edit this copyright text!
# 
# ROCK Linux: rock-src/package/mnemoc/boehm-gc/gcc33-use_system_gc.diff
# ROCK Linux is Copyright (C) 1998 - 2003 Clifford Wolf
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version. A copy of the GNU General Public
# License can be found at Documentation/COPYING.
# 
# Many people helped and are helping developing ROCK Linux. Please
# have a look at http://www.rocklinux.org/ and the Documentation/TEAM
# file for details.
# 
# --- ROCK-COPYRIGHT-NOTE-END ---

--- ./Makefile.in.orig	2003-07-12 19:19:25.000000000 -0400
+++ ./Makefile.in	2003-07-12 19:21:35.000000000 -0400
@@ -761,7 +761,6 @@
 	all-target-libffi \
 	all-target-libjava \
 	all-target-zlib \
-	all-target-boehm-gc \
 	all-target-qthreads \
 	all-target-rda
 
@@ -781,7 +780,6 @@
 	configure-target-libffi \
 	configure-target-libjava \
 	configure-target-zlib \
-	configure-target-boehm-gc \
 	configure-target-qthreads \
 	configure-target-rda
 
@@ -798,7 +796,6 @@
 	check-target-libffi \
 	check-target-libjava \
 	check-target-zlib \
-	check-target-boehm-gc \
 	check-target-qthreads \
 	check-target-rda
 
@@ -817,7 +814,6 @@
 	install-target-libffi \
 	install-target-libjava \
 	install-target-zlib \
-	install-target-boehm-gc \
 	install-target-qthreads \
 	install-target-rda
 
@@ -898,7 +894,6 @@
 	clean-target-libffi \
 	clean-target-libjava \
 	clean-target-zlib \
-	clean-target-boehm-gc \
 	clean-target-qthreads \
 	clean-target-rda
 
@@ -1654,7 +1649,6 @@
 all-bfd: all-libiberty all-intl
 all-binutils: all-libiberty all-opcodes all-bfd all-flex all-bison all-byacc all-intl
 all-bison: all-texinfo
-configure-target-boehm-gc: $(ALL_GCC_C) configure-target-qthreads
 all-byacc:
 all-bzip2:
 all-db:
@@ -1694,8 +1688,8 @@
 all-build-libiberty: configure-build-libiberty
 
 configure-target-libffi: $(ALL_GCC_C) 
-configure-target-libjava: $(ALL_GCC_C) configure-target-zlib configure-target-boehm-gc configure-target-qthreads configure-target-libffi
-all-target-libjava: all-fastjar all-target-zlib all-target-boehm-gc all-target-qthreads all-target-libffi
+configure-target-libjava: $(ALL_GCC_C) configure-target-zlib configure-target-qthreads configure-target-libffi
+all-target-libjava: all-fastjar all-target-zlib all-target-qthreads all-target-libffi
 configure-target-libstdc++-v3: $(ALL_GCC_C)
 all-target-libstdc++-v3: all-target-libiberty
 all-libtool:
@@ -1772,7 +1766,6 @@
 all-target-libffi: configure-target-libffi
 all-target-libjava: configure-target-libjava
 all-target-zlib: configure-target-zlib
-all-target-boehm-gc: configure-target-boehm-gc
 all-target-qthreads: configure-target-qthreads
 all-target-rda: configure-target-rda
 
--- ./libjava/configure.orig	2003-07-14 13:10:59.000000000 -0400
+++ ./libjava/configure	2003-07-14 13:12:01.000000000 -0400
@@ -3235,12 +3235,12 @@
 case "$GC" in
  boehm)
     echo "$ac_t""boehm" 1>&6
-    GCLIBS=../boehm-gc/libgcjgc_convenience.la
-    GCINCS='-I$(top_srcdir)/../boehm-gc/include'
+    GCLIBS='$(prefix)/lib/libgc.la'
+    GCINCS='-I$(prefix)/include/gc'
     JC1GCSPEC='-fuse-boehm-gc'
-    GCTESTSPEC="-L`${PWDCMD-pwd}`/../boehm-gc/.libs -rpath `${PWDCMD-pwd}`/../boehm-gc/.libs"
+    #GCTESTSPEC="-L`${PWDCMD-pwd}`/../boehm-gc/.libs -rpath `${PWDCMD-pwd}`/../boehm-gc/.libs"
 
-            GCINCS="$GCINCS `cat ../boehm-gc/boehm-cflags`"
+   #         GCINCS="$GCINCS `cat ../boehm-gc/boehm-cflags`"
     GCOBJS=boehm.lo
     GCHDR=boehm-gc.h
         cat >> confdefs.h <<\EOF
--- ./libjava/libltdl/configure.orig	2003-07-14 13:12:15.000000000 -0400
+++ ./libjava/libltdl/configure	2003-07-14 13:13:03.000000000 -0400
@@ -2508,8 +2508,8 @@
 
 GCINCS=
 if test "$GC" = "boehm"; then
-   GCINCS='-I$(top_srcdir)/../../boehm-gc/include'
-   GCINCS="$GCINCS `cat ../../boehm-gc/boehm-cflags`"
+   GCINCS='-I$(prefix)/include/gc'
+   #GCINCS="$GCINCS `cat ../../boehm-gc/boehm-cflags`"
    cat >> confdefs.h <<\EOF
 #define HAVE_BOEHM_GC 1
 EOF
