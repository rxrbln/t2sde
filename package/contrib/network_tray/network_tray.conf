# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by scripts/Create-CopyPatch.
# 
# T2 SDE: package/*/network_tray/network_tray.conf
# Copyright (C) 2021 The T2 SDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- T2-COPYRIGHT-NOTE-END ---

function build_nwtray {
 [ -f network_tray ] && rm -f network_tray
 [ -f network_tray.pot ] && rm -f network_tray.pot
 gcc network_tray.c -o network_tray `pkg-config --cflags --libs gtk+-2.0`
 xgettext --keyword="_" network_tray.c  -o network_tray.pot
 if [ -f network_tray ];then
  strip --strip-unneeded network_tray
  mkdir -p $root/usr/local/lib/X11/mini-icons
  cp -f networkblank.xpm $root/usr/local/lib/X11/mini-icons/
  cp -f networkboth.xpm $root/usr/local/lib/X11/mini-icons/
  cp -f networkdead.xpm $root/usr/local/lib/X11/mini-icons/
  cp -f networkin.xpm $root/usr/local/lib/X11/mini-icons/
  cp -f networkout.xpm $root/usr/local/lib/X11/mini-icons/
  mkdir -p $root/root/Startup
  cp -a -f network_tray $root/root/Startup/
  mkdir -p $root/usr/share/doc/nls/network_tray
  cp -a -f network_tray.pot $root/usr/share/doc/nls/network_tray/
 fi
}
custmain=build_nwtray

#need this, otherwise get error, as have installed into usr/local:
check_usrlocal=0

#oh dear, installs into root/Startup, but T2 doesn't put it into the binary tarball.
#not in the file-list either.
#this works:
flistroot='root usr var'
