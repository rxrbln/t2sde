# --- T2-COPYRIGHT-BEGIN ---
# t2/package/*/nmon/nmon.desc
# Copyright (C) 2025 The T2 SDE Project
# SPDX-License-Identifier: GPL-2.0
# --- T2-COPYRIGHT-END ---

[I] Nigel's performance Monitor for Linux

[T] nmon is a systems administrator, tuner, and benchmark tool the gives you
[T] a huge amount of important performance information in one go.

[U] https://nmon.sourceforge.io

[A] Nigel Griffiths <nigelargriffiths@hotmail.com>
[M] Tomas Glozar <tglozar@gmail.com>

[C] extra/tool
[F] CROSS

[L] GPL
[S] Beta
[V] 16s

[D] ec9702b376405115d898c5783e1a9383224314ae3988e1d4a2c67da6 Makefile_nmon16s https://downloads.sourceforge.net/project/nmon/
[D] 478cd20459919ac5641b9e4202c874d2b56cf9864e30925448491921 lmon16s.c https://downloads.sourceforge.net/project/nmon/

autoextract=0

prepare_source() {
	mkdir $pkg-$ver/
	cd $pkg-$ver/
	cp $archdir/Makefile_$pkg$ver Makefile
	cp $archdir/lmon$ver.c lmon.c
	objdir=$(pwd)/nmon_$(uname -m)_T2
	[ "$arch" = x86-64 ] && objdir=$(pwd)/nmon_X86_T2
	[ "$arch" = powerpc64 ] && [ "$SDECFG_POWERPC64_ENDIANESS" = le ] && objdir=$(pwd)/nmon_POWER_T2
	mkdir $objdir
}
hook_add premake 2 prepare_source

makeinstopt=
hook_add postmake 2 'install $objdir/* $root$bindir/nmon'
