# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: architecture/sparc64/pkg_binutils.diff
# Copyright (C) 2006 The T2 SDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This patch file is dual-licensed. It is available under the license the
# patched project is licensed under, as long as it is an OpenSource license
# as defined at http://www.opensource.org/ (e.g. BSD, X11) or under the terms
# of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
# --- T2-COPYRIGHT-NOTE-END ---

As GCC, we want the the linker to use elf32 by default, otherwise we would
have to patch packages like mozilla* or exact-image (and potentially other
exact-build based packages) that assume they can "pre"-link objects using
"ld -r". Of course the linker should accept the the default compiler output,
by default as well.

  - Rene Rebe <rene@exactcode.de>

--- binutils-2.17.50.0.2/ld/configure.tgt.vanilla	2006-07-24 19:31:25.000000000 +0000
+++ binutils-2.17.50.0.2/ld/configure.tgt	2006-07-24 19:33:11.000000000 +0000
@@ -504,11 +504,11 @@
 			targ_extra_emuls="elf32_sparc sun4"
 			tdir_elf32_sparc=`echo ${targ_alias} | sed -e 's/aout//'`
 			tdir_sun4=sparc-sun-sunos4 ;;
-sparc64-*-linux-*)	targ_emul=elf64_sparc
-			targ_extra_emuls="elf32_sparc sparclinux sun4"
-			targ_extra_libpath=elf32_sparc
-			tdir_elf32_sparc=`echo ${targ_alias} | sed -e 's/64//'`
-			tdir_sparclinux=${tdir_elf32_sparc}aout
+sparc64-*-linux-*)	targ_emul=elf32_sparc
+			targ_extra_emuls="sparclinux elf64_sparc sun4"
+			targ_extra_libpath=elf64_sparc
+			tdir_sparclinux=${targ_alias}aout
+			tdir_elf64_sparc=`echo ${targ_alias} | sed -e 's/32//'`
 			tdir_sun4=sparc-sun-sunos4 ;;
 sparc*-*-linux-*)	targ_emul=elf32_sparc
 			targ_extra_emuls="sparclinux elf64_sparc sun4"
