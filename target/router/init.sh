#!/bin/bash
# --- T2-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# 
# T2 SDE: target/router/init.sh
# Copyright (C) 2004 - 2005 The T2 SDE Project
# 
# More information can be found in the files COPYING and README.
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- T2-COPYRIGHT-NOTE-END ---

mount -n -t proc none /proc
mount -n -t tmpfs none /tmp
cat /proc/mounts > /etc/fstab
cat /proc/mounts > /etc/mtab

ln -sf /proc/kcore      /dev/core
ln -sf /proc/self/fd    /dev/fd
ln -sf fd/0             /dev/stdin
ln -sf fd/1             /dev/stdout
ln -sf fd/2             /dev/stderr

hwscan > /etc/hwscan.sh
sh /etc/hwscan.sh 2> /dev/null

echo
echo "                     *************************************"
echo "                     **            T2 Router            **"
echo "                     **   http://www.exactcode.de/t2/   **"
echo "                     *************************************"
echo

for x in vc/{1,2,3,4,5,6} ; do
   ( ( while : ; do agetty -i 38400 $x -n -l /bin/login-shell ; done ) & )
done
                                                                                
exec < /dev/null > /dev/null 2>&1
while : ; do sleep 1 ; done

