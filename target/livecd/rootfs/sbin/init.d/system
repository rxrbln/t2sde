#!patch

--- system.vanilla	2005-11-07 01:45:58.000000000 +0100
+++ system	2005-11-07 01:47:13.000000000 +0100
@@ -66,6 +66,14 @@
 
 	title "Activating swap devices."
 	swapon -a || error=$?
+	for x in /dev/{hd,sd}??*; do
+		[ -e $x ] || continue
+		if disktype $x | grep -q Swap &&
+		   ! grep -q $x /proc/swaps; then
+			echo "Discovered swap space on $x, activating."
+			swapon $x
+		fi
+	done
     	status
 
 	title "Checking file systems."
@@ -88,7 +88,9 @@
     	status
 
 	title "Mounting local file systems."
+if false; then
 	mount -n -o remount,rw / || error=$?
+fi
 	cat /proc/mounts > /etc/mtab
 	mount -a -t nocoda,nfs,devfs,proc,sysfs || error=$?
     	status
 
