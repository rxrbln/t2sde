#!/bin/sh

echo "T2 live setup ..."

mkdir -p /tmp ; chmod 1777 /tmp

echo "Setting up overlay mounts ..."

mkdir /tmp/live-overlay
mount -t unionfs -o dirs=/tmp/live-overlay:/live=ro none /live

mkdir /tmp/home-overlay
mount -t unionfs -o dirs=/tmp/home-overlay:/home=ro none /home


echo "Finalizing configuration ..."
cat /proc/mounts > /etc/mtab

exec /sbin/init $*

# s.th. went wrong - debug mode ,-)
exec sh --login

